/*
	MIT License
 @author		Jason Huck - Core Five Labs
 @author		Simon Georget <simon (at) linea21 (dot) com>
 @copyright	Authors
*/
(function(a){function I(a){var e=this.window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest;if(!e)throw Error("XMLHttpRequest not supported");e.open("HEAD",a,!1);e.send(null);return 200==e.status?!0:!1}function n(b,e){return"dir"==b["File Type"]&&"download"==e?!1:"undefined"==typeof b.Capabilities?!0:-1<a.inArray(e,b.Capabilities)}function r(b){var e=b.attr("class").replace(/ /g,"_");if(""==e)return"itemOptions";if(!a("#"+e).length){var d=a("#itemOptions").clone().attr("id",
e);b.hasClass("cap_select")||a(".select",d).remove();b.hasClass("cap_download")||a(".download",d).remove();b.hasClass("cap_rename")||a(".rename",d).remove();b.hasClass("cap_delete")||a(".delete",d).remove();a("#itemOptions").after(d)}return e}a.urlParam=function(a){return(a=RegExp("[\\?&]"+a+"=([^&#]*)").exec(window.location.href))?a[1]:0};var g,z=null;a.ajax({async:!1,url:"./scripts/filemanager.config.js",dataType:"json",cache:!1,success:function(a){z=a}});g=z;var k="connectors/"+g.options.lang+
"/filemanager."+g.options.lang,m=["select","download","rename","delete"];0!=a.urlParam("langCode")&&I("scripts/languages/"+a.urlParam("langCode")+".js")&&(g.options.culture=a.urlParam("langCode"));var f=[];a.ajax({url:"scripts/languages/"+g.options.culture+".js",async:!1,dataType:"json",success:function(a){f=a}});a.prompt.setDefaults({overlayspeed:"fast",show:"fadeIn",opacity:0.4,persistent:!1});var A=function(){var b=20;!0===g.options.searchBox&&(b+=33);b=a(window).height()-a("#uploader").height()-
b;a("#splitter, #filetree, #fileinfo, .vsplitbar").height(b)},s=function(a,e){e="undefined"===typeof e?!0:!1;if(!1==g.options.showFullPath){if("function"===typeof displayPathDecorator)return displayPathDecorator(a.replace(fileRoot,"/"));a=a.replace(fileRoot,"/");if(50<a.length&&!0===e){var d=a.split("/");a="/"+d[1]+"/"+d[2]+"/(...)/"+d[d.length-2]+"/"}}return a},u=function(b){"grid"==b?(a("#grid").addClass("ON"),a("#list").removeClass("ON")):(a("#list").addClass("ON"),a("#grid").removeClass("ON"))},
v=function(a){var e="",e="\u0160\u0161\u0110\u0111\u017d\u017e\u010c\u010d\u0106\u0107\u00c0\u00c1\u00c2\u00c3\u00c4\u00c5\u00c6\u00c7\u00c8\u00c9\u00ca\u00cb\u00cc\u00cd\u00ce\u00cf\u00d1\u00d2\u00d3\u00d4\u00d5\u00d6\u0150\u00d8\u00d9\u00da\u00db\u00dc\u00dd\u00de\u00df\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5\u00e6\u00e7\u00e8\u00e9\u00ea\u00eb\u00ec\u00ed\u00ee\u00ef\u00f0\u00f1\u00f2\u00f3\u00f4\u00f5\u00f6\u0151\u00f8\u00f9\u00fa\u00fb\u00fd\u00fd\u00fe\u00ff\u0154\u0155 '/".split(""),d="S s Dj dj Z z C c C c A A A A A A A C E E E E I I I I N O O O O O O O U U U U Y B Ss a a a a a a a c e e e e i i i i o n o o o o o o o u u u y y b y R r _ _ ".split(" ");
a=String(a);for(i=0;i<e.length;i++)a=a.replace(RegExp(e[i],"g"),d[i]);e=a;g.options.chars_only_latin&&(e=e.replace(/[^_a-zA-Z0-9]/g,""));return e=e.replace(/[_]+/g,"_")},B=function(a){a=parseFloat(a);for(var e=0,d=[f.bytes,f.kb,f.mb,f.gb];;){if(1024>a)return a=Math.round(100*a)/100,a+d[e];a/=1024;e+=1}},C=function(b){a("#fileinfo").html("<h1>"+b+"</h1>");a("#newfile").attr("disabled","disabled");a("#upload").attr("disabled","disabled");a("#newfolder").attr("disabled","disabled")},p=function(a){return 1==
a.split(".").length?"":a.split(".").pop().toLowerCase()},w=function(b){a("#currentpath").val(b);a("#uploader h1").text(f.current_folder+s(b)).attr("title",s(b,!1));a("#newfolder").unbind().click(function(){var b=f.default_foldername,d=f.prompt_foldername+' : <input id="fname" name="fname" type="text" value="'+b+'" />',c={};c[f.create_folder]=!0;c[f.cancel]=!1;a.prompt(d,{callback:function(c,d){if(1!=c)return!1;var l=d.children("#fname").val();""!=l?(b=v(l),l=new Date,a.getJSON(k+"?mode=addfolder&path="+
a("#currentpath").val()+"&name="+b+"&time="+l.getMilliseconds(),function(c){if(0==c.Code){var b=c.Parent,d=c.Name,h='<li class="directory collapsed"><a rel="'+b+d+'/" href="#">'+d+'</a><ul class="jqueryFileTree" style="display: block;"></ul></li>',e=a("#filetree").find('a[rel="'+b+'"]');b!=fileRoot?e.next("ul").prepend(h).prev("a").click().click():(a("#filetree > ul").prepend(h),a("#filetree").find('li a[rel="'+b+d+'/"]').attr("class","cap_rename cap_delete").click(function(){j(b+d+"/")}).each(function(){a(this).contextMenu({menu:r(a(this))},
function(c,b){var d=a(b).attr("rel");t(c,d)})}));g.options.showConfirmation&&a.prompt(f.successful_added_folder);j(c.Parent);a("#filetree").find('a[rel="'+c.Parent+'/"]').click().click()}else a.prompt(c.Error)})):a.prompt(f.no_foldername)},buttons:c})})},F=function(b){a("#fileinfo button").each(function(){0==a(this).find("span").length&&a(this).wrapInner("<span></span>")});if(n(b,"select")){if(a("#fileinfo").find("button#select").click(function(){x(b)}).show(),window.opener||window.tinyMCEPopup)a("#preview img").attr("title",
f.select),a("#preview img").click(function(){x(b)}).css("cursor","pointer")}else a("#fileinfo").find("button#select").hide();n(b,"rename")?a("#fileinfo").find("button#rename").click(function(){var e=D(b);e.length&&a("#fileinfo > h1").text(e)}).show():a("#fileinfo").find("button#rename").hide();n(b,"delete")?a("#fileinfo").find("button#delete").click(function(){E(b)&&a("#fileinfo").html("<h1>"+f.select_from_left+"</h1>")}).show():a("#fileinfo").find("button#delete").hide();n(b,"download")?a("#fileinfo").find("button#download").click(function(){window.location=
k+"?mode=download&path="+encodeURIComponent(b.Path)}).show():a("#fileinfo").find("button#download").hide()},H=function(){a("#filetree").fileTree({root:fileRoot,datafunc:K,multiFolder:!1,folderCallback:function(a){j(a)},expandedFolder:fullexpandedFolder,after:function(){a("#filetree").find("li a").each(function(){a(this).contextMenu({menu:r(a(this))},function(b,e){var d=a(e).attr("rel");t(b,d)})});!0==g.options.searchBox&&(a("#q").liveUpdate("#filetree ul").blur(),a("#search span.q-inactive").html(f.search),
a("#search a.q-reset").attr("title",f.search_reset))}},function(a){G(a)})},x=function(b){var e=!1!=g.options.relPath?relPath+b.Path.replace(fileRoot,""):relPath+b.Path;window.opener||window.tinyMCEPopup||a.urlParam("field_name")?window.tinyMCEPopup?(b=tinyMCEPopup.getWindowArg("window"),b.document.getElementById(tinyMCEPopup.getWindowArg("input")).value=e,"undefined"!=typeof b.ImageDialog&&(b.ImageDialog.getImageData&&b.ImageDialog.getImageData(),b.ImageDialog.showPreviewImage&&b.ImageDialog.showPreviewImage(e)),
tinyMCEPopup.close()):(a.urlParam("field_name")?(parent.document.getElementById(a.urlParam("field_name")).value=e,top.tinyMCE.activeEditor.windowManager.close()):a.urlParam("CKEditor")?window.opener.CKEDITOR.tools.callFunction(a.urlParam("CKEditorFuncNum"),e):""!=b.Properties.Width?window.opener.SetUrl(e,b.Properties.Width,b.Properties.Height):window.opener.SetUrl(e),window.close()):a.prompt(f.fck_select_integration)},D=function(b){var e="",d=f.new_filename+' : <input id="rname" name="rname" type="text" value="',
c;c=b.Filename;c=-1!=c.lastIndexOf(".")?c.substring(0,c.lastIndexOf(".")):c;var h={};h[f.rename]=!0;h[f.cancel]=!1;a.prompt(d+c+'" />',{callback:function(c,d){if(1!=c)return!1;rname=d.children("#rname").val();if(""!=rname){var h;h=rname;filename="";-1!=h.lastIndexOf(".")?(filename=v(h.substr(0,h.lastIndexOf("."))),filename+="."+h.split(".").pop()):filename=v(h);h=filename;var j=p(b.Filename);0<j.length&&(h=h+"."+j);var q=b.Path;a.ajax({type:"GET",url:k+"?mode=rename&old="+b.Path+"&new="+h,dataType:"json",
async:!1,success:function(c){if(0==c.Code){var h=c["New Path"],d=c["New Name"],l=a("#filetree").find('a[rel="'+q+'"]'),J=l.parent().parent().prev("a");l.attr("rel",h).text(d);J.click().click();l=a("#preview h1").attr("title");"undefined"!=typeof l&&l==q&&a("#preview h1").text(d);"grid"==a("#fileinfo").data("view")?(a('#fileinfo img[alt="'+q+'"]').parent().next("p").text(d),a('#fileinfo img[alt="'+q+'"]').attr("alt",h)):(a('#fileinfo td[title="'+q+'"]').text(d),a('#fileinfo td[title="'+q+'"]').attr("title",
h));a("#preview h1").html(d);b.Path=h;b.Filename=d;a("#fileinfo").find("button#rename, button#delete, button#download").unbind();F(b);g.options.showConfirmation&&a.prompt(f.successful_rename)}else a.prompt(c.Error);e=c["New Name"]}})}},buttons:h});return e},E=function(b){var e=!1,d=f.confirmation_delete,c={};c[f.yes]=!0;c[f.no]=!1;a.prompt(d,{callback:function(c){if(1!=c)return!1;c=k+"?mode=delete&path="+encodeURIComponent(b.Path);var d=b.Path.split("/").reverse().slice(1).reverse().join("/")+"/";
a.ajax({type:"GET",url:c,dataType:"json",async:!1,success:function(c){if(0==c.Code){var b=c.Path;a("#filetree").find('a[rel="'+b+'"]').parent().fadeOut("slow",function(){a(this).remove()});"grid"==a("#fileinfo").data("view")?a('#contents img[alt="'+b+'"]').parent().parent().fadeOut("slow",function(){a(this).remove()}):a("table#contents").find('td[title="'+b+'"]').parent().fadeOut("slow",function(){a(this).remove()});a("#preview").length&&j(b.substr(0,b.lastIndexOf("/")+1));c=c.Path.substring(0,c.Path.length-
1);c=c.substr(0,c.lastIndexOf("/")+1);a("#uploader h1").text(f.current_folder+s(c)).attr("title",s(c,!1));e=!0;g.options.showConfirmation&&a.prompt(f.successful_delete);a("#filetree").find('a[rel="'+d+'/"]').click().click()}else e=!1,a.prompt(c.Error)}})},buttons:c});return e},y=function(b){b.lastIndexOf("/")==b.length-1?(j(b),a("#filetree").find('a[rel="'+b+'"]').click()):G(b)},t=function(b,e){a.getJSON(k+"?mode=getinfo&path="+e+"&time="+(new Date).getMilliseconds(),function(d){"grid"==a("#fileinfo").data("view")?
a("#fileinfo").find('img[alt="'+d.Path+'"]').parent():a("#fileinfo").find('td[title="'+d.Path+'"]').parent();switch(b){case "select":x(d);break;case "download":window.location=k+"?mode=download&path="+d.Path;break;case "rename":D(d);break;case "delete":E(d)}})},G=function(b){var e=b.substr(0,b.lastIndexOf("/")+1);w(e);var d;d='<div id="preview"><img /><h1></h1><dl></dl></div><form id="toolbar">';if(window.opener||window.tinyMCEPopup||a.urlParam("field_name"))d+='<button id="select" name="select" type="button" value="Select">'+
f.select+"</button>";d+='<button id="download" name="download" type="button" value="Download">'+f.download+"</button>";!0!=g.options.browseOnly&&(d+='<button id="rename" name="rename" type="button" value="Rename">'+f.rename+"</button>");!0!=g.options.browseOnly&&(d+='<button id="delete" name="delete" type="button" value="Delete">'+f.del+"</button>");d+='<button id="parentfolder">'+f.parentfolder+"</button>";a("#fileinfo").html(d+"</form>");a("#parentfolder").click(function(){j(e)});d=new Date;a.getJSON(k+
"?mode=getinfo&path="+encodeURIComponent(b)+"&time="+d.getMilliseconds(),function(c){if(0==c.Code){a("#fileinfo").find("h1").text(c.Filename).attr("title",b);a("#fileinfo").find("img").attr("src",c.Preview);var d;d=-1!=a.inArray(p(c.Filename),g.videos.videosExt)?!0:!1;d&&!0==g.videos.showVideoPlayer&&(d="<video width="+g.videos.videosPlayerWidth+" height="+g.videos.videosPlayerHeight+' src="'+c.Path+'" controls="controls">',d+='<img src="'+c.Preview+'" />',d+="</video>",a("#fileinfo img").remove(),
a("#fileinfo #preview h1").before(d));d=-1!=a.inArray(p(c.Filename),g.audios.audiosExt)?!0:!1;d&&!0==g.audios.showAudioPlayer&&(d='<audio src="'+c.Path+'" controls="controls">',d+='<img src="'+c.Preview+'" />',d+="</audio>",a("#fileinfo img").remove(),a("#fileinfo #preview h1").before(d));d="";c.Properties.Width&&""!=c.Properties.Width&&(d+="<dt>"+f.dimensions+"</dt><dd>"+c.Properties.Width+"x"+c.Properties.Height+"</dd>");c.Properties["Date Created"]&&""!=c.Properties["Date Created"]&&(d+="<dt>"+
f.created+"</dt><dd>"+c.Properties["Date Created"]+"</dd>");c.Properties["Date Modified"]&&""!=c.Properties["Date Modified"]&&(d+="<dt>"+f.modified+"</dt><dd>"+c.Properties["Date Modified"]+"</dd>");if(c.Properties.Size||0==parseInt(c.Properties.Size))d+="<dt>"+f.size+"</dt><dd>"+B(c.Properties.Size)+"</dd>";a("#fileinfo").find("dl").html(d);F(c)}else a.prompt(c.Error)})},j=function(b){w(b);a("#fileinfo").html('<img id="activity" src="images/wait30trans.gif" width="30" height="30" />');var e=new Date;
b=k+"?path="+encodeURIComponent(b)+"&mode=getfolder&showThumbs="+g.options.showThumbs+"&time="+e.getMilliseconds();a.urlParam("type")&&(b+="&type="+a.urlParam("type"));a.getJSON(b,function(d){var c="";if("-1"==d.Code)C(d.Error);else{if(d)if("grid"==a("#fileinfo").data("view")){c+='<ul id="contents" class="grid">';for(key in d){var b=d[key].Properties,e="";for(cap in m)n(d[key],m[cap])&&(e+=" cap_"+m[cap]);var g=64,j=b.Width;1<j&&j<g&&(g=j);c+='<li class="'+e+'" title="'+d[key].Path+'"><div class="clip"><img src="'+
d[key].Preview+'" width="'+g+'" alt="'+d[key].Path+'" /></div><p>'+d[key].Filename+"</p>";b.Width&&""!=b.Width&&(c+='<span class="meta dimensions">'+b.Width+"x"+b.Height+"</span>");b.Size&&""!=b.Size&&(c+='<span class="meta size">'+b.Size+"</span>");b["Date Created"]&&""!=b["Date Created"]&&(c+='<span class="meta created">'+b["Date Created"]+"</span>");b["Date Modified"]&&""!=b["Date Modified"]&&(c+='<span class="meta modified">'+b["Date Modified"]+"</span>");c+="</li>"}c+="</ul>"}else{c=c+'<table id="contents" class="list">'+
('<thead><tr><th class="headerSortDown"><span>'+f.name+"</span></th><th><span>"+f.dimensions+"</span></th><th><span>"+f.size+"</span></th><th><span>"+f.modified+"</span></th></tr></thead>");c+="<tbody>";for(key in d){g=d[key].Path;b=d[key].Properties;e="";for(cap in m)n(d[key],m[cap])&&(e+=" cap_"+m[cap]);c+='<tr class="'+e+'">';c+='<td title="'+g+'">'+d[key].Filename+"</td>";c=b.Width&&""!=b.Width?c+("<td>"+b.Width+"x"+b.Height+"</td>"):c+"<td></td>";c=b.Size&&""!=b.Size?c+('<td><abbr title="'+b.Size+
'">'+B(b.Size)+"</abbr></td>"):c+"<td></td>";c=b["Date Modified"]&&""!=b["Date Modified"]?c+("<td>"+b["Date Modified"]+"</td>"):c+"<td></td>";c+="</tr>"}c+="</tbody>";c+="</table>"}else c+="<h1>"+f.could_not_retrieve_folder+"</h1>";a("#fileinfo").html(c);if("grid"==a("#fileinfo").data("view"))a("#fileinfo").find("#contents li").click(function(){var c=a(this).find("img").attr("alt");y(c)}).each(function(){a(this).contextMenu({menu:r(a(this))},function(c,b){var d=a(b).find("img").attr("alt");t(c,d)})});
else{a("#fileinfo tbody tr").click(function(){var c=a("td:first-child",this).attr("title");y(c)}).each(function(){a(this).contextMenu({menu:r(a(this))},function(c,b){var d=a("td:first-child",b).attr("title");t(c,d)})});a("#fileinfo").find("table").tablesorter({textExtraction:function(c){return a(c).find("abbr").size()?a(c).find("abbr").attr("title"):c.innerHTML}});var k=setInterval(function(){var c=k;a("#fileinfo").find("td:first-child").each(function(){var b=a(this).attr("title"),b=a("#filetree").find('a[rel="'+
b+'"]').parent();"undefined"!==typeof b.css("background-image")&&(a(this).css("background-image",b.css("background-image")),window.clearInterval(c))})},300)}}})},K=function(b,e){var d=new Date,d=k+"?path="+encodeURIComponent(b)+"&mode=getfolder&showThumbs="+g.options.showThumbs+"&time="+d.getMilliseconds();a.urlParam("type")&&(d+="&type="+a.urlParam("type"));a.getJSON(d,function(a){var b="";if("-1"==a.Code)C(a.Error);else{if(a){b+='<ul class="jqueryFileTree" style="display: none;">';for(key in a){var d=
"";for(cap in m)n(a[key],m[cap])&&(d+=" cap_"+m[cap]);"dir"==a[key]["File Type"]?b+='<li class="directory collapsed"><a href="#" class="'+d+'" rel="'+a[key].Path+'">'+a[key].Filename+"</a></li>":g.options.listFiles&&(b+='<li class="file ext_'+a[key]["File Type"].toLowerCase()+'"><a href="#" class="'+d+'" rel="'+a[key].Path+'">'+a[key].Filename+"</a></li>")}b+="</ul>"}else b+="<h1>"+f.could_not_retrieve_folder+"</h1>";e(b)}})};a(function(){if(g.extras.extra_js)for(var b=0;b<g.extras.extra_js.length;b++)a.ajax({url:g.extras.extra_js[b],
dataType:"script",async:g.extras.extra_js_async});fileRoot=g.options.fileRoot?g.options.serverRoot?"/"+g.options.fileRoot:g.options.fileRoot:"/"+document.location.pathname.substring(1,document.location.pathname.lastIndexOf("/")+1)+"userfiles/";relPath=g.options.relPath?g.options.relPath:window.location.protocol+"//"+window.location.host;0!=a.urlParam("expandedFolder")?(expandedFolder=a.urlParam("expandedFolder"),fullexpandedFolder=fileRoot+expandedFolder):(expandedFolder="",fullexpandedFolder=null);
!0==g.options.autoload&&(a("#upload").append(f.upload),a("#newfolder").append(f.new_folder),a("#grid").attr("title",f.grid_view),a("#list").attr("title",f.list_view),a("#fileinfo h1").append(f.select_from_left),a('#itemOptions a[href$="#select"]').append(f.select),a('#itemOptions a[href$="#download"]').append(f.download),a('#itemOptions a[href$="#rename"]').append(f.rename),a('#itemOptions a[href$="#delete"]').append(f.del));a("#browse").append("+");a("#browse").attr("title",f.browse);a("#newfile").change(function(){a("#filepath").val(a(this).val())});
!0===g.options.searchBox?a.getScript("./scripts/filemanager.liveSearch.min.js"):a("#search").remove();a("button").wrapInner("<span></span>");a("#fileinfo").data("view",g.options.defaultViewMode);u(g.options.defaultViewMode);a("#home").click(function(){var b=a("#fileinfo").data("view");a("#fileinfo").data("view",b);a("#filetree>ul>li.expanded>a").trigger("click");j(fileRoot)});a("#grid").click(function(){u("grid");a("#fileinfo").data("view","grid");j(a("#currentpath").val())});a("#list").click(function(){u("list");
a("#fileinfo").data("view","list");j(a("#currentpath").val())});w(fileRoot);a("#uploader").attr("action",k);a("#uploader").ajaxForm({target:"#uploadresponse",beforeSubmit:function(b,d){if(""==a("#newfile",d).val())return!1;var c;c=a("#newfile",d).val();c="DISALLOW_ALL"==g.security.uploadPolicy&&-1!=a.inArray(p(c),g.security.uploadRestrictions)?!0:"ALLOW_ALL"==g.security.uploadPolicy&&-1==a.inArray(p(c),g.security.uploadRestrictions)?!0:!1;if(!c)return c="<p>"+f.INVALID_FILE_TYPE+"</p>","DISALLOW_ALL"==
g.security.uploadPolicy&&(c+="<p>"+f.ALLOWED_FILE_TYPE+g.security.uploadRestrictions.join(", ")+".</p>"),"ALLOW_ALL"==g.security.uploadPolicy&&(c+="<p>"+f.DISALLOWED_FILE_TYPE+g.security.uploadRestrictions.join(", ")+".</p>"),a("#filepath").val(""),a.prompt(c),!1;a("#upload").attr("disabled",!0);a("#upload span").addClass("loading").text(f.loading_data);if("images"==a.urlParam("type").toString().toLowerCase()){c=a("#newfile",d).val().toLowerCase().split(".");for(key in g.images.imagesExt)if(g.images.imagesExt[key]==
c[c.length-1])return!0;a.prompt(f.UPLOAD_IMAGES_ONLY);a("#upload").removeAttr("disabled").find("span").removeClass("loading").text(f.upload);return!1}if("undefined"!==typeof FileReader&&"auto"!=typeof g.upload.fileSizeLimit&&a("#newfile",d).get(0).files[0].size>1048576*g.upload.fileSizeLimit)return a.prompt("<p>"+f.file_too_big+"</p><p>"+f.file_size_limit+g.upload.fileSizeLimit+" "+f.mb+".</p>"),a("#upload").removeAttr("disabled").find("span").removeClass("loading").text(f.upload),!1},error:function(){a("#upload").removeAttr("disabled").find("span").removeClass("loading").text(f.upload);
a.prompt("Error uploading file")},success:function(){var b=jQuery.parseJSON(a("#uploadresponse").find("textarea").text());if(0==b.Code){var d=b.Path,c=b.Name,h=p(c),k=a("#filetree").find('a[rel="'+d+'"]'),l=k.parent(),c='<li class="file ext_'+h+'"><a rel="'+d+c+'" href="#" class="">'+c+"</a></li>";l.find("ul").size()?(l.find("ul").prepend(c),k.click().click()):(l=a("#filetree").find("ul.jqueryFileTree"),l.prepend(c),H());j(d);g.options.showConfirmation&&a.prompt(f.successful_added_file);a("#filepath, #newfile").val("");
a("#filetree").find('a[rel="'+b.Path+'/"]').click().click()}else a.prompt(b.Error);a("#upload").removeAttr("disabled");a("#upload span").removeClass("loading").text(f.upload);a("#filepath").val("")}});H();!window.opener&&(!window.tinyMCEPopup&&!a.urlParam("field_name"))&&a('#itemOptions a[href$="#select"]').remove();!0==g.options.browseOnly&&(a("#file-input-container").remove(),a("#upload").remove(),a("#newfolder").remove(),a("#toolbar").remove("#rename"),a(".contextMenu .rename").remove(),a(".contextMenu .delete").remove());
A();a(window).resize(A);a("#splitter").splitter({sizeLeft:200});y(fileRoot+expandedFolder)})})(jQuery);
